{"name":"Linea_de_Embalaje","description":"","videoUrl":"","codeProject":false,"code":"/***   Included libraries  ***/\n#include <Servo.h>\n\n\n/***   Global variables and function definition  ***/\nconst int led_ON_OFF = 12;\nconst int potenciometro = A0;\nconst int boton = 2;\nconst int sensor_infrarrojos = 4;\nServo servo_embudo;\nServo servo_cinta_embalaje;\n\n/*\nAutor : Santiago Ventura Gomez . 2017\n*/\n/*\nCurso Experto Universitario en Robótica , Programación e Impresión 3D\n*/\n/*\nAsignatura : Bitbloq y Arduino\n*/\n/*\nProfesor : Alberto Valero\n*/\n/*\nActividad 5 , Libre : Linea de Embalaje\n*/\n/*\nObjetivo : Implementar un sistema que sea capaz de detectar y colocar una caja bajo una tolva llena con canicas y empaquetar en cada caja un número prefijado de ellas . Una vez realizado , la cinta avanza dicha caja llena y coloca la siguiente vacía para volver a comenzar el ciclo de empaquetado .\n*/\n/*\nMáquina con los siguientes estados :\n* S0 : Apagado OFF\n* S1 : Encendido ON + Calibración de la Velocidad de la Cinta de Embalaje\n* S2 : Caja sin posicionar y vacía . IR = 1\n* S3 : Caja sin posicionar y vacía . IR = 0\n* S4 : Caja posicionada y vacía . IR = 0\n* S5 : Caja posicionada y llena con N canicas . IR = 0\nEventos  :\n* E1 : Boton pulsar y soltar\n* E2 : Botón  pulsar_soltar & IR = 1\n* E3 : Botón pulsa_soltar & IR = 0\n* E4 : Valor IR cambia :  1 -- > 0\n* E5 : caja_posicionada = TRUE\n* E6 : caja_llena = TRUE\n*/\n/*\nDescripcion de variables :\n* estado = almacena el estado de mi máquina\n* bolas_por_caja = guarda el número de bolas que hay que embalar en cada caja . Se puede variar\n* contador = guarda el número de bolas que se llevan guardadas en una determinada caja hasta ese momento\n* pasos_avance = número de partes en las que dividimos el avance del micro servo para controlar el tiempo de apertura y cierre\n* velocidad_cinta = guarda el valor de  la velocidad de avance de la cinta de embalar , determinado por el potenciometro en la fase de ajuste\n* caja_posicionada =  variable lógica que guarda si la caja a llenar está bien posicionada o no\n* caja_llena = variable lógica que guarda si la caja posicionada está llena o no \n*/\n/*\nNOTA : Al tener solamente un botón , la única manera de sacar a la máquina de su ciclo es con una parada de emergencia en el bo´ton RESET\n*/\nfloat estado = 0;\nfloat bolas_por_caja = 4;\nfloat contador = 0;\nfloat pasos_avance = 0;\nint velocidad_cinta = 0;\nbool caja_posicionada = false;\nbool caja_llena = false;\n\n\n\n/***   Setup  ***/void setup(){\npinMode(led_ON_OFF, OUTPUT);\npinMode(potenciometro, INPUT);\npinMode(boton, INPUT);\npinMode(sensor_infrarrojos, INPUT);\nservo_embudo.attach(9);\nservo_cinta_embalaje.attach(7);\n\n/*\nIniciamos el programa asegurándonos que el LED está apagado y los servos desconectados\n*/\ndigitalWrite(led_ON_OFF,LOW);\nservo_embudo.write(0);\nservo_embudo.detach();\nservo_cinta_embalaje.detach();\n}\n\n\n/***   Loop  ***/void loop(){/*\nDefinición de la LOGICA de mi máquina :\n*/\nif(((estado == 0) && (digitalRead(boton) == 1))){while (digitalRead(boton) == 1){delay(10);\n/*\nBucle while para evitar efectos rebote del botón\n*/\n}\nestado = 1;\n/*\nSi estado = 0 y pulsamos botón > estado = 1\n*/\n}\nif(((estado == 1) && ((digitalRead(boton) == 1) && (digitalRead(sensor_infrarrojos) == 1)))){while (digitalRead(boton) == 1){delay(10);\n/*\nBucle while para evitar efectos rebote del botón\n*/\n}\nestado = 2;\n/*\nSi estado = 1 , pulsamos botón y el sensor IR tiene una caja delante ( IR = 1 ) >  estado = 2\n*/\n}\nif(((estado == 1) && ((digitalRead(boton) == 1) && (digitalRead(sensor_infrarrojos) == 0)))){while (digitalRead(boton) == 1){delay(10);\n/*\nBucle while para evitar efectos rebote del botón\n*/\n}\nestado = 3;\n/*\nSi estado = 1 , pulsamos botón y el sensor IR  NO tiene una caja delante ( IR = 0 ) >  estado = 3\n*/\n}\nif(((estado == 2) && (digitalRead(sensor_infrarrojos) == 0))){estado = 3;\n/*\nSi estado = 2 , pulsamos botón y el sensor IR  NO tiene una caja delante ( IR = 0 ) >  estado = 3\n*/\n}\nif(((estado == 3) && (caja_posicionada == true))){estado = 4;\n/*\nSi estado = 3 y caja_posicionada = TRUE pasamos al estado = 4 , para llenar la caja recien posicionada\n*/\n}\nif(((estado == 4) && (caja_llena == true))){estado = 5;\ncaja_posicionada = false;\ncaja_llena = false;\n/*\nSi estado = 4 , y caja_llena = TRUE , quiere decir que la caja posicionada está terminada de llenar y hay que avanzar linea a la siguiente caja . Pasamos caja_posicionada y caja_llena a FALSE , para que posiciones la siguiente caja vacía\n*/\n}\nif(((estado == 5) && (caja_posicionada == true))){estado = 4;\n/*\nSi estado = 5 y caja_posicionada = TRUE , volveremos al estado = 4 para comenzar a llenar la siguiente caja recien posicionada\n*/\n}\n/*\nProgramación de las ACCIONES de la máquina en cada ESTADO :\n*/\nswitch (int(estado)) {case 0:digitalWrite(led_ON_OFF,LOW);\nservo_embudo.detach();\nservo_cinta_embalaje.detach();\ndelay(50);\n/*\nestado 0  > Mantenemos apagado el led y desconectados los servos\n*/\nbreak;\ncase 1:digitalWrite(led_ON_OFF,HIGH);\nservo_embudo.detach();\nservo_cinta_embalaje.attach(7);\nvelocidad_cinta = (int) map(analogRead(potenciometro),0,1023,0,180);\nservo_cinta_embalaje.write(velocidad_cinta);\ndelay(50);\n/*\nEncendemos el LED , conectamos el servo de la cinta de embalaje y ajustamos su velocidad con   el potenciómetro . El valor de la velocidad se almacena en la variable velocidad_cinta\n*/\nbreak;\ncase 2:digitalWrite(led_ON_OFF,HIGH);\nservo_embudo.detach();\nservo_cinta_embalaje.attach(7);\nservo_cinta_embalaje.write(velocidad_cinta);\ndelay(50);\nMantenemos LED encendido , servo del embudo apagado y la cinta de embala en marcha a la velocidad previamente prefijada\n\nbreak;\ncase 3:digitalWrite(led_ON_OFF,HIGH);\nservo_embudo.detach();\nservo_cinta_embalaje.attach(7);\nwhile (digitalRead(sensor_infrarrojos) == 0){servo_cinta_embalaje.write(velocidad_cinta);\n}\nwhile (digitalRead(sensor_infrarrojos) == 1){servo_cinta_embalaje.write(velocidad_cinta);\n}\ncaja_posicionada = true;\n/*\nMantenemos led encendido , y servo del embudo apagado . Avanzamos la cinta de embalar hasta realizar con el sensor IR una secuencia  0 --> 1 --> 0 , que indica que acaba de pasar una caja por delante . En ese momento ponemos la variable caja_posicionada = TRUE\n*/\nbreak;\ncase 4:digitalWrite(led_ON_OFF,HIGH);\nservo_cinta_embalaje.detach();\nservo_embudo.attach(9);\nservo_embudo.write(0);\n/*\nMantenemos LED encendido , apagamos la cinta de embalaje , y encendemos el servo del embudo . Lo colocamos a 0º para recibir la primera bola del embudo\n*/\n/*\nEl siguiente bucle while lo realizamos tantas veces como bolas queramos echar en cada caja :\n*/\nwhile (contador < bolas_por_caja){/*\nEl moviemiento del microservo desde 0 > 180 y  vuelta desde 180 > 0 º , se lleva a cabo en pasos de 2 º , con intervalos de tiempo de 11 mS cada uno , lo que hace que cada giro emplee 1001 mS\n*/\nfor(pasos_avance=0;pasos_avance <= 90;pasos_avance += 1){servo_embudo.write(pasos_avance * 2);\ndelay(11);\n}\nfor(pasos_avance=90;pasos_avance >= 0;pasos_avance -= 1){servo_embudo.write(pasos_avance * 2);\ndelay(11);\n}\n/*\nCada vez que hace un ciclo 0º > 180º > 0º , la variable contador aumenta 1 unidad porque hemos echado una bola más a la caja\n*/\ncontador = contador + 1;\ndelay(500);\n}\ncontador = 0;\ncaja_llena = true;\nservo_embudo.detach();\nservo_cinta_embalaje.attach(7);\n/*\nCuando contador = bolas_por_caja prefijadas , salimos del bucle while , ponemos la variable contador otra vez a 0 , y la variable caja_llena a TRUE\n*/\nbreak;\ncase 5:digitalWrite(led_ON_OFF,HIGH);\nservo_embudo.detach();\nservo_cinta_embalaje.attach(7);\n/*\nMantenemos led encendido , y servo del embudo apagado . Avanzamos la cinta de embalar hasta realizar con el sensor IR una secuencia  0 --> 1 --> 0 , que indica que acaba de pasar la siguiente caja por delante . En ese momento ponemos la variable caja_posicionada = TRUE\n*/\nwhile (digitalRead(sensor_infrarrojos) == 0){servo_cinta_embalaje.write(velocidad_cinta);\n}\nwhile (digitalRead(sensor_infrarrojos) == 1){servo_cinta_embalaje.write(velocidad_cinta);\n}\ncaja_posicionada = true;\nbreak;\n}\n/*\nFin del Programa\n*/\n}\n\n\n\n\n","image":"default","userTags":[],"hardwareTags":["bq ZUM","led","pot","button","irs","servo"],"software":{"vars":{"name":"varsBloq","content":[[]],"enable":true,"childs":[{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Autor : Santiago Ventura Gomez . 2017"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Curso Experto Universitario en Robótica , Programación e Impresión 3D"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Asignatura : Bitbloq y Arduino"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Profesor : Alberto Valero"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Actividad 5 , Libre : Linea de Embalaje"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Objetivo : Implementar un sistema que sea capaz de detectar y colocar una caja bajo una tolva llena con canicas y empaquetar en cada caja un número prefijado de ellas . Una vez realizado , la cinta avanza dicha caja llena y coloca la siguiente vacía para volver a comenzar el ciclo de empaquetado ."}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Máquina con los siguientes estados :\n* S0 : Apagado OFF\n* S1 : Encendido ON + Calibración de la Velocidad de la Cinta de Embalaje\n* S2 : Caja sin posicionar y vacía . IR = 1\n* S3 : Caja sin posicionar y vacía . IR = 0\n* S4 : Caja posicionada y vacía . IR = 0\n* S5 : Caja posicionada y llena con N canicas . IR = 0\nEventos  :\n* E1 : Boton pulsar y soltar\n* E2 : Botón  pulsar_soltar & IR = 1\n* E3 : Botón pulsa_soltar & IR = 0\n* E4 : Valor IR cambia :  1 -- > 0\n* E5 : caja_posicionada = TRUE\n* E6 : caja_llena = TRUE"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Descripcion de variables :\n* estado = almacena el estado de mi máquina\n* bolas_por_caja = guarda el número de bolas que hay que embalar en cada caja . Se puede variar\n* contador = guarda el número de bolas que se llevan guardadas en una determinada caja hasta ese momento\n* pasos_avance = número de partes en las que dividimos el avance del micro servo para controlar el tiempo de apertura y cierre\n* velocidad_cinta = guarda el valor de  la velocidad de avance de la cinta de embalar , determinado por el potenciometro en la fase de ajuste\n* caja_posicionada =  variable lógica que guarda si la caja a llenar está bien posicionada o no\n* caja_llena = variable lógica que guarda si la caja posicionada está llena o no "}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"NOTA : Al tener solamente un botón , la única manera de sacar a la máquina de su ciclo es con una parada de emergencia en el bo´ton RESET"}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"estado"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"bolas_por_caja"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"4"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"contador"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariable","content":[[{"alias":"varInput","id":"NAME","value":"pasos_avance"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariableAdvanced","content":[[{"alias":"varInput","id":"NAME","value":"velocidad_cinta"},{"alias":"staticDropdown","id":"TYPE","value":"int"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"declareVariableAdvanced","content":[[{"alias":"varInput","id":"NAME","value":"caja_posicionada"},{"alias":"staticDropdown","id":"TYPE","value":"bool"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"false"}]],"enable":true}}]],"enable":true},{"name":"declareVariableAdvanced","content":[[{"alias":"varInput","id":"NAME","value":"caja_llena"},{"alias":"staticDropdown","id":"TYPE","value":"bool"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"false"}]],"enable":true}}]],"enable":true}]},"setup":{"name":"setupBloq","content":[[]],"enable":true,"childs":[{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Iniciamos el programa asegurándonos que el LED está apagado y los servos desconectados"}]],"enable":true},{"name":"led","content":[[{"alias":"staticDropdown","id":"STATE","value":"LOW"},{"alias":"dynamicDropdown","id":"LED","value":"led_ON_OFF"}]],"enable":true},{"name":"servoNormal","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"},{"alias":"numberInput","id":"POSITION","value":"0"}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_cinta_embalaje"}]],"enable":true}]},"loop":{"name":"loopBloq","content":[[]],"enable":true,"childs":[{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Definición de la LOGICA de mi máquina :"}]],"enable":true},{"name":"ifAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"CONDITION","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"estado","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"boton","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"while","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"boton","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true,"childs":[{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"10"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Bucle while para evitar efectos rebote del botón"}]],"enable":true}]},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"estado","valueType":"float"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Si estado = 0 y pulsamos botón > estado = 1"}]],"enable":true}]},{"name":"ifAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"CONDITION","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"estado","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"boton","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"sensor_infrarrojos","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"while","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"boton","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true,"childs":[{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"10"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Bucle while para evitar efectos rebote del botón"}]],"enable":true}]},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"estado","valueType":"float"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"2"}]],"enable":true}}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Si estado = 1 , pulsamos botón y el sensor IR tiene una caja delante ( IR = 1 ) >  estado = 2"}]],"enable":true}]},{"name":"ifAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"CONDITION","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"estado","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"boton","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"sensor_infrarrojos","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"while","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"boton","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true,"childs":[{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"10"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Bucle while para evitar efectos rebote del botón"}]],"enable":true}]},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"estado","valueType":"float"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"3"}]],"enable":true}}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Si estado = 1 , pulsamos botón y el sensor IR  NO tiene una caja delante ( IR = 0 ) >  estado = 3"}]],"enable":true}]},{"name":"ifAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"CONDITION","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"estado","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"2"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"sensor_infrarrojos","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"estado","valueType":"float"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"3"}]],"enable":true}}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Si estado = 2 , pulsamos botón y el sensor IR  NO tiene una caja delante ( IR = 0 ) >  estado = 3"}]],"enable":true}]},{"name":"ifAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"CONDITION","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"estado","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"3"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"caja_posicionada","valueType":"bool"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"true"}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"estado","valueType":"float"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"4"}]],"enable":true}}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Si estado = 3 y caja_posicionada = TRUE pasamos al estado = 4 , para llenar la caja recien posicionada"}]],"enable":true}]},{"name":"ifAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"CONDITION","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"estado","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"4"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"caja_llena","valueType":"bool"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"true"}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"estado","valueType":"float"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"5"}]],"enable":true}}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"caja_posicionada","valueType":"bool"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"false"}]],"enable":true}}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"caja_llena","valueType":"bool"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"false"}]],"enable":true}}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Si estado = 4 , y caja_llena = TRUE , quiere decir que la caja posicionada está terminada de llenar y hay que avanzar linea a la siguiente caja . Pasamos caja_posicionada y caja_llena a FALSE , para que posiciones la siguiente caja vacía"}]],"enable":true}]},{"name":"ifAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"CONDITION","value":{"name":"logicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"estado","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"5"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"&&"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"equalityOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"caja_posicionada","valueType":"bool"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"true"}]],"enable":true}}]],"enable":true}}]],"enable":true}}]],"enable":true,"childs":[{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"estado","valueType":"float"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"4"}]],"enable":true}}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Si estado = 5 y caja_posicionada = TRUE , volveremos al estado = 4 para comenzar a llenar la siguiente caja recien posicionada"}]],"enable":true}]},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Programación de las ACCIONES de la máquina en cada ESTADO :"}]],"enable":true},{"name":"switch","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"estado","valueType":"float"}]],"enable":true,"childs":[{"name":"case","content":[[{"alias":"numberInput","id":"VAR","value":"0"}]],"enable":true,"childs":[{"name":"led","content":[[{"alias":"staticDropdown","id":"STATE","value":"LOW"},{"alias":"dynamicDropdown","id":"LED","value":"led_ON_OFF"}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_cinta_embalaje"}]],"enable":true},{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"50"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"estado 0  > Mantenemos apagado el led y desconectados los servos"}]],"enable":true}]},{"name":"case","content":[[{"alias":"numberInput","id":"VAR","value":"1"}]],"enable":true,"childs":[{"name":"led","content":[[{"alias":"staticDropdown","id":"STATE","value":"HIGH"},{"alias":"dynamicDropdown","id":"LED","value":"led_ON_OFF"}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"}]],"enable":true},{"name":"servoAttach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_cinta_embalaje"}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"velocidad_cinta","valueType":"int"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"numConversion","content":[[{"alias":"bloqInput","bloqInputId":"NUMBER","value":{"name":"map","content":[[{"alias":"bloqInput","bloqInputId":"VAR","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"potenciometro","valueType":"float"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"MAXVAL","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"180"}]],"enable":true}}]],"enable":true}},{"alias":"staticDropdown","id":"TYPE","value":"int"}]],"enable":true}}]],"enable":true},{"name":"servoNormalAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"SERVO","value":{"name":"hwVariable","content":[[{"alias":"dynamicDropdown","id":"COMPONENT","value":"servo_cinta_embalaje"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"POSITION","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"velocidad_cinta","valueType":"int"}]],"enable":true}}]],"enable":true},{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"50"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Encendemos el LED , conectamos el servo de la cinta de embalaje y ajustamos su velocidad con   el potenciómetro . El valor de la velocidad se almacena en la variable velocidad_cinta"}]],"enable":true}]},{"name":"case","content":[[{"alias":"numberInput","id":"VAR","value":"2"}]],"enable":true,"childs":[{"name":"led","content":[[{"alias":"staticDropdown","id":"STATE","value":"HIGH"},{"alias":"dynamicDropdown","id":"LED","value":"led_ON_OFF"}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"}]],"enable":true},{"name":"servoAttach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_cinta_embalaje"}]],"enable":true},{"name":"servoNormalAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"SERVO","value":{"name":"hwVariable","content":[[{"alias":"dynamicDropdown","id":"COMPONENT","value":"servo_cinta_embalaje"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"POSITION","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"velocidad_cinta","valueType":"int"}]],"enable":true}}]],"enable":true},{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"50"}]],"enable":true},{"name":"code","content":[[{"alias":"multilineCodeInput","id":"CODE","value":"Mantenemos LED encendido , servo del embudo apagado y la cinta de embala en marcha a la velocidad previamente prefijada"}]],"enable":true}]},{"name":"case","content":[[{"alias":"numberInput","id":"VAR","value":"3"}]],"enable":true,"childs":[{"name":"led","content":[[{"alias":"staticDropdown","id":"STATE","value":"HIGH"},{"alias":"dynamicDropdown","id":"LED","value":"led_ON_OFF"}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"}]],"enable":true},{"name":"servoAttach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_cinta_embalaje"}]],"enable":true},{"name":"while","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"sensor_infrarrojos","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true,"childs":[{"name":"servoNormalAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"SERVO","value":{"name":"hwVariable","content":[[{"alias":"dynamicDropdown","id":"COMPONENT","value":"servo_cinta_embalaje"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"POSITION","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"velocidad_cinta","valueType":"int"}]],"enable":true}}]],"enable":true}]},{"name":"while","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"sensor_infrarrojos","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true,"childs":[{"name":"servoNormalAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"SERVO","value":{"name":"hwVariable","content":[[{"alias":"dynamicDropdown","id":"COMPONENT","value":"servo_cinta_embalaje"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"POSITION","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"velocidad_cinta","valueType":"int"}]],"enable":true}}]],"enable":true}]},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"caja_posicionada","valueType":"bool"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"true"}]],"enable":true}}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Mantenemos led encendido , y servo del embudo apagado . Avanzamos la cinta de embalar hasta realizar con el sensor IR una secuencia  0 --> 1 --> 0 , que indica que acaba de pasar una caja por delante . En ese momento ponemos la variable caja_posicionada = TRUE"}]],"enable":true}]},{"name":"case","content":[[{"alias":"numberInput","id":"VAR","value":"4"}]],"enable":true,"childs":[{"name":"led","content":[[{"alias":"staticDropdown","id":"STATE","value":"HIGH"},{"alias":"dynamicDropdown","id":"LED","value":"led_ON_OFF"}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_cinta_embalaje"}]],"enable":true},{"name":"servoAttach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"}]],"enable":true},{"name":"servoNormal","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"},{"alias":"numberInput","id":"POSITION","value":"0"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Mantenemos LED encendido , apagamos la cinta de embalaje , y encendemos el servo del embudo . Lo colocamos a 0º para recibir la primera bola del embudo"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"El siguiente bucle while lo realizamos tantas veces como bolas queramos echar en cada caja :"}]],"enable":true},{"name":"while","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"contador","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"<"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"bolas_por_caja","valueType":"float"}]],"enable":true}}]],"enable":true,"childs":[{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"El moviemiento del microservo desde 0 > 180 y  vuelta desde 180 > 0 º , se lleva a cabo en pasos de 2 º , con intervalos de tiempo de 11 mS cada uno , lo que hace que cada giro emplee 1001 mS"}]],"enable":true},{"name":"for-v1","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"pasos_avance","valueType":"float"},{"alias":"numberInput","id":"INIT","value":"0"},{"alias":"numberInput","id":"FINAL","value":"90"},{"alias":"staticDropdown","id":"MODE","value":"+"},{"alias":"numberInput","id":"ADD","value":"1"}]],"enable":true,"childs":[{"name":"servoNormalAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"SERVO","value":{"name":"hwVariable","content":[[{"alias":"dynamicDropdown","id":"COMPONENT","value":"servo_embudo"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"POSITION","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"pasos_avance","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"*"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"2"}]],"enable":true}}]],"enable":true}}]],"enable":true},{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"11"}]],"enable":true}]},{"name":"for-v1","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"pasos_avance","valueType":"float"},{"alias":"numberInput","id":"INIT","value":"90"},{"alias":"numberInput","id":"FINAL","value":"0"},{"alias":"staticDropdown","id":"MODE","value":"-"},{"alias":"numberInput","id":"ADD","value":"1"}]],"enable":true,"childs":[{"name":"servoNormalAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"SERVO","value":{"name":"hwVariable","content":[[{"alias":"dynamicDropdown","id":"COMPONENT","value":"servo_embudo"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"POSITION","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"pasos_avance","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"*"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"2"}]],"enable":true}}]],"enable":true}}]],"enable":true},{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"11"}]],"enable":true}]},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Cada vez que hace un ciclo 0º > 180º > 0º , la variable contador aumenta 1 unidad porque hemos echado una bola más a la caja"}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"contador","valueType":"float"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"basicOperations","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"contador","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"+"},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true}}]],"enable":true},{"name":"wait","content":[[{"alias":"numberInput","id":"TIME","value":"500"}]],"enable":true}]},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"contador","valueType":"float"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"caja_llena","valueType":"bool"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"true"}]],"enable":true}}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"}]],"enable":true},{"name":"servoAttach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_cinta_embalaje"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Cuando contador = bolas_por_caja prefijadas , salimos del bucle while , ponemos la variable contador otra vez a 0 , y la variable caja_llena a TRUE"}]],"enable":true}]},{"name":"case","content":[[{"alias":"numberInput","id":"VAR","value":"5"}]],"enable":true,"childs":[{"name":"led","content":[[{"alias":"staticDropdown","id":"STATE","value":"HIGH"},{"alias":"dynamicDropdown","id":"LED","value":"led_ON_OFF"}]],"enable":true},{"name":"servoDetach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_embudo"}]],"enable":true},{"name":"servoAttach","content":[[{"alias":"dynamicDropdown","id":"SERVO","value":"servo_cinta_embalaje"}]],"enable":true},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Mantenemos led encendido , y servo del embudo apagado . Avanzamos la cinta de embalar hasta realizar con el sensor IR una secuencia  0 --> 1 --> 0 , que indica que acaba de pasar la siguiente caja por delante . En ese momento ponemos la variable caja_posicionada = TRUE"}]],"enable":true},{"name":"while","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"sensor_infrarrojos","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"0"}]],"enable":true}}]],"enable":true,"childs":[{"name":"servoNormalAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"SERVO","value":{"name":"hwVariable","content":[[{"alias":"dynamicDropdown","id":"COMPONENT","value":"servo_cinta_embalaje"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"POSITION","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"velocidad_cinta","valueType":"int"}]],"enable":true}}]],"enable":true}]},{"name":"while","content":[[{"alias":"bloqInput","bloqInputId":"ARG1","value":{"name":"readSensor","content":[[{"alias":"dynamicDropdown","id":"SENSOR","value":"sensor_infrarrojos","valueType":"float"}]],"enable":true}},{"alias":"staticDropdown","id":"OPERATOR","value":"=="},{"alias":"bloqInput","bloqInputId":"ARG2","value":{"name":"number","content":[[{"alias":"numberInput","id":"VALUE","value":"1"}]],"enable":true}}]],"enable":true,"childs":[{"name":"servoNormalAdvanced","content":[[{"alias":"bloqInput","bloqInputId":"SERVO","value":{"name":"hwVariable","content":[[{"alias":"dynamicDropdown","id":"COMPONENT","value":"servo_cinta_embalaje"}]],"enable":true}},{"alias":"bloqInput","bloqInputId":"POSITION","value":{"name":"selectVariable","content":[[{"alias":"dynamicDropdown","id":"VAR","value":"velocidad_cinta","valueType":"int"}]],"enable":true}}]],"enable":true}]},{"name":"setVariable","content":[[{"alias":"dynamicDropdown","id":"NAME","value":"caja_posicionada","valueType":"bool"},{"alias":"bloqInput","bloqInputId":"VALUE","value":{"name":"boolean","content":[[{"alias":"staticDropdown","id":"STATE","value":"true"}]],"enable":true}}]],"enable":true}]}]},{"name":"comment","content":[[{"alias":"multilineCommentInput","id":"COMMENT","value":"Fin del Programa"}]],"enable":true}]}},"hardware":{"board":"bq ZUM","robot":null,"connections":[{"pinSourceUid":"9cb3fc3a-1e93-4ed1-bd38-988ad6dd8a50","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd01"},{"pinSourceUid":"5e9dfaa4-d193-4961-a528-ddf8fcd3ba96","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53ba05"},{"pinSourceUid":"054044bf-20f3-4444-91df-17be8c55ac12","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd11"},{"pinSourceUid":"6afa1af6-02aa-427e-aa64-82ee8d7cd505","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd09"},{"pinSourceUid":"d23abd2f-ca35-4012-8adb-31091d9015d9","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd04"},{"pinSourceUid":"6f977c6f-69c0-4ac8-9d9f-aca7d95cdd2e","pinTargetUid":"6be0dd9d-2e52-4b7d-9dfc-c9edad53bd06"}],"components":[{"id":"led","width":55,"height":83,"pins":{"digital":["s"]},"dragtype":"components","coordinates":{"x":21.637931034482758,"y":17.12121212121212},"category":"leds","name":"led_ON_OFF","connected":true,"uid":"1371e5f1-2cef-46b9-bacb-cbbf57d25590","pin":{"s":"12"},"endpoints":{"s":{"uid":"9cb3fc3a-1e93-4ed1-bd38-988ad6dd8a50","type":"digital"}}},{"id":"pot","type":"analog","width":74,"height":101,"dataReturnType":"float","pins":{"analog":["s"]},"dragtype":"components","coordinates":{"x":35.43103448275862,"y":78.33333333333333},"category":"sensors","name":"potenciometro","connected":true,"uid":"91404cbc-ce1a-4f2e-83c5-06d825f5350a","pin":{"s":"A0"},"endpoints":{"s":{"uid":"5e9dfaa4-d193-4961-a528-ddf8fcd3ba96","type":"analog"}}},{"id":"button","type":"digital","width":90,"height":73,"dataReturnType":"float","pins":{"digital":["s"]},"dragtype":"components","coordinates":{"x":85.25862068965517,"y":56.96969696969697},"category":"sensors","name":"boton","connected":true,"uid":"1323fda8-7e59-4662-8f5e-9494cfc13a27","pin":{"s":"2"},"endpoints":{"s":{"uid":"054044bf-20f3-4444-91df-17be8c55ac12","type":"digital"}}},{"id":"irs","type":"digital","width":90,"height":77,"dataReturnType":"float","pins":{"digital":["s"]},"dragtype":"components","coordinates":{"x":75.6896551724138,"y":9.393939393939393},"category":"sensors","name":"sensor_infrarrojos","connected":true,"uid":"930a9eed-3c9b-48db-a264-9bbe54ba56e7","pin":{"s":"4"},"endpoints":{"s":{"uid":"6afa1af6-02aa-427e-aa64-82ee8d7cd505","type":"digital"}}},{"id":"servo","width":125,"height":106,"pins":{"digital":["s"]},"oscillator":false,"dragtype":"components","coordinates":{"x":31.120689655172413,"y":5},"category":"servos","name":"servo_embudo","connected":true,"uid":"5476b917-de8e-452b-83ac-27858518dd9a","pin":{"s":"9"},"endpoints":{"s":{"uid":"d23abd2f-ca35-4012-8adb-31091d9015d9","type":"digital"}}},{"id":"servo","width":125,"height":106,"pins":{"digital":["s"]},"oscillator":false,"dragtype":"components","coordinates":{"x":51.55172413793103,"y":3.3333333333333335},"category":"servos","name":"servo_cinta_embalaje","connected":true,"uid":"b4740963-c72b-45a6-8fb7-71258f06b59b","pin":{"s":"7"},"endpoints":{"s":{"uid":"6f977c6f-69c0-4ac8-9d9f-aca7d95cdd2e","type":"digital"}}}]},"defaultTheme":"infotab_option_colorTheme","timesDownload":0,"timesAdded":0,"timesViewed":0,"bloqsVersion":"^0.4.24"}